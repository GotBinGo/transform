<style>
#viewport, #stage, #myCanvas {
    width: 500px;
    height: 500px;
    position: absolute;
    top: 0;
    left: 0;
}

#viewport {
    border: 1px solid #000;
    overflow: hidden;
}

#stage {
    perspective: 1000px;
    transform-style: preserve-3d;
}

#myCanvas {
	position:absolute;
	margin:auto;
	top:0;
	bottom:0;
	left:0;
	right:0;
    background-color: green;
    transform-style: preserve-3d;
}

#stuff {
    position: absolute;
    top: 350px;
}
</style>

<canvas id="myCanvas" width="500" height="500"></canvas>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>
var counter = 0;
var mov = 0;
var rel = 0;
transformMe();
$('#myCanvas').mousedown(function _drawOnCanvas (e)
{
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var xpos, ypos;
    
    if (typeof e.offsetX=='undefined')
    {
        xpos = e.originalEvent.layerX;
        ypos = e.originalEvent.layerY;
    }
    else
    {
        xpos = e.offsetX;
        ypos = e.offsetY;
    }
    
    
ctx.fillRect(xpos-5, ypos-5, 10, 10);
});
$('#myCanvas').mousemove(function(evt) {
posx = evt.pageX;
mov = ((posx/500)-.5);
if(Math.abs(mov) < .2)
	mov = 0;
mov = mov /50;
console.log(mov);
//transformMe();
});
$('#myCanvas').mouseleave(function(evt) {

	mov = 0;

//transformMe();
});
setInterval(function(){ 
transformMe(); 
rel+= mov;
rel *= .95;
}, 1);
function transformMe()
{
    counter+=rel;
    var angle = (counter * 10) % 360;
    $('#myCanvas').css('transform','perspective(1000px)  rotate3d(1,0,0,80deg)rotate3d(0,0,1,' + angle + 'deg)');
};
</script>
